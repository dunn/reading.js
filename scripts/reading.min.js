var headerList="H1 H2 H3 H4 H5 H6".split(" "),elements=[],headers=[],visible=[],iconThis="←",iconAll="↕",headerLinks=" <button class='this' title='Collapse this section'>"+iconThis+"</button> <button class='all' title='Collapse all sections at this level'>"+iconAll+"</button>",keyNext=106,keyPrev=107,keyNextUp=111,keyPrevUp=105,keyFirst=117,keyLast=109,keyAll=97,keyExpand=102,keyTheme=115,url;
window.onload=function(){document.documentElement.classList.add("dark");elements=document.body.children;visible=getElements(!1,["HEADER"],!0);headers=getElements(!0,headerList,!1);headers[0].classList.add("active");for(var a=0;a<headers.length;a++)headers[a].innerHTML+=headerLinks,headers[a].onclick=toggleHandler;a=headers[0].getAttribute("id");null===a&&(headers[0].setAttribute("id","startOfContent"),a="startOfContent");url=window.location.toString();var b=url.indexOf("#");if(-1!==b){var c=url.slice(b+
1);url=url.slice(0,b);b=document.getElementById(c);yesHeaderTag(b)&&(clearActive(headers),makeActive(b))}a='<p><a href="#'+a+'" title="Skip to content">Skip to content</a></p><aside><h3>Keyboard shortcuts</h3><ul><li><span class="key">'+String.fromCharCode(keyNext)+" / "+String.fromCharCode(keyPrev)+'</span> next/previous</li><li><span class="key">enter</span> toggle active header</li><li><span class="key">'+String.fromCharCode(keyNextUp)+" / "+String.fromCharCode(keyPrevUp)+'</span> next/previous header (one level up)</li><li><span class="key">'+
String.fromCharCode(keyFirst)+" / "+String.fromCharCode(keyLast)+'</span> start/end of document</li><li><span class="key">'+String.fromCharCode(keyAll)+'</span> toggle everything in this section</li><li><span class="key">'+String.fromCharCode(keyExpand)+'</span> expand everything (do this before you search)</li><li><span class="key">'+String.fromCharCode(keyTheme)+"</span> change theme</li></ul></aside>";b=document.body.children[0];c=document.createElement("div");c.classList.add("js-infobox");document.body.insertBefore(c,
b);c.innerHTML=a};
window.onkeypress=function(a){a=a||window.event;a=a.which||a.keyCode;13===a?toggleHandler(whoIsActive()):a===keyAll&&toggleSame();if(a===keyNext)activateSame(visible,"down",1);else if(a===keyPrev)activateSame(visible,"up",1);else if(a===keyFirst)clearActive(visible),makeActive(visible[0]);else if(a===keyLast)clearActive(visible),makeActive(visible[visible.length-1]);else if(a===keyPrevUp)nextUp(!1);else if(a===keyNextUp)nextUp(!0);else if(a===keyExpand)for(;isAnythingHidden(visible);)for(a=0;a<visible.length;a++)visible[a].classList.contains("collapsed")&&
toggleHandler(visible[a]);else a===keyTheme&&(a=document.documentElement,a.classList.toggle("dark"),a.classList.toggle("light"))};
function toggleHandler(a){var b;isClick(a)?(clearActive(headers),yesHeaderTag(a.target)?(b=a.target,b.classList.add("active")):a.target.classList.contains("all")?(b=document.getElementsByTagName(a.target.parentElement.tagName),a.target.parentElement.classList.add("active")):(b=a.target.parentElement,b.classList.add("active"))):b=a;void 0===b.length&&yesHeaderTag(b)?toggleMe(b):toggleSame();a=whoIsActive();makeActive(a);headers=getElements(!0,headerList,!0);visible=getElements(!1,["HEADER"],!0)}
function toggleMe(a){for(var b=0;b<elements.length;b++)if(elements[b]===a){var c=getHeaderNum(a),c=compareHeaders(b,elements,c);if(isCollapsed(a)){toggleCollapse(a);for(b+=1;elements[b]!==c&&void 0!==elements[b];)if(yesHeaderTag(elements[b]))if(isCollapsed(elements[b])){var d=getHeaderNum(elements[b]),d=compareHeaders(b,elements,d);for(elements[b].classList.remove("hidden");elements[b]!==d&&void 0!==elements[b];)b++}else elements[b].classList.remove("hidden"),b++;else elements[b].classList.remove("hidden"),
b++}else{toggleCollapse(a);for(b+=1;elements[b]!==c&&void 0!==elements[b];)elements[b].classList.add("hidden"),b++}addToggler(a);break}}
function toggleSame(){var a=whoIsActive();if("H1"===a.tagName){var b=document.getElementsByTagName("H1");toggleHandler(a);if(isCollapsed(a))for(var c=0;c<b.length;c++)b[c]!==a&&!isCollapsed(b[c])&&toggleHandler(b[c]);else for(c=0;c<b.length;c++)b[c]!==a&&isCollapsed(b[c])&&toggleHandler(b[c])}else if(yesHeaderTag(a)){toggleHandler(a);b=getHeaderNum(a);for(c=0;c<headers.length;c++)if(headers[c]===a){for(var d=0,e=c-1;getHeaderNum(headers[e])>=b;){var f=getHeaderNum(headers[e]);isCollapsed(a)?!isCollapsed(headers[e])&&
f===b?toggleHandler(headers[e]):d++:isCollapsed(headers[e])&&f===b?toggleHandler(headers[e]):d++;e--}for(c=c-d+1;getHeaderNum(headers[c])>=b;)d=getHeaderNum(headers[c]),isCollapsed(a)?!isCollapsed(headers[c])&&d===b&&toggleHandler(headers[c]):isCollapsed(headers[c])&&d===b&&toggleHandler(headers[c]),c++;break}}}function compareHeaders(a,b,c){for(a+=1;a<b.length;a++){if(a===b.length-1)return elements[elements.length];if(yesHeaderTag(b[a])&&b[a].tagName.slice(1)<=c)return b[a]}}
function addToggler(a){a.onclick=toggleHandler}function isCollapsed(a){return a.classList.contains("collapsed")}function toggleCollapse(a){a.classList.toggle("collapsed")}function getHeaderNum(a){return void 0===a.length?a.tagName.slice(1):a[0].tagName.slice(1)}function isClick(a){return void 0!==a.target}function whoIsActive(){return document.getElementsByClassName("active")[0]}
function isAnythingHidden(a){if(void 0===a.length)return a.classList.contains("collapsed");for(var b=0,c=0;c<a.length;c++)a[c].classList.contains("collapsed")&&b++;return 0<b?!0:!1}function activateSame(a,b,c){if("down"===b)for(b=0;b<a.length-1;b++){if(a[b].classList.contains("active")){clearActive(a);makeActive(a[b+c]);break}}else for(b=a.length-1;0<b;b--)if(a[b].classList.contains("active")){clearActive(a);makeActive(a[b-c]);break}}
function nextUp(a){for(var b=whoIsActive(),c=0;c<visible.length;c++)if(visible[c]===b){for(c=a?c+1:c-1;a?c<visible.length:0<=c;a?c++:c--)if(yesHeaderTag(visible[c])&&(getHeaderNum(b)>getHeaderNum(visible[c])||!yesHeaderTag(b))){clearActive(visible);makeActive(visible[c]);break}break}}function makeActive(a){a.classList.add("active");var b=a.getAttribute("id");null!==b&&window.location.replace(url+"#"+b);a.scrollIntoView()}
function clearActive(a){for(var b=0;b<a.length;b++)a[b].classList.remove("active")}function getElements(a,b,c){for(var d=0,e=[],f=0;f<elements.length;f++)for(var g=0;g<b.length;g++){var h=elements[f].tagName,i=b[g];if(!elements[f].parentElement.classList.contains("js-infobox")&&!elements[f].classList.contains("js-infobox")&&(a&&h===i||!a&&h!==i))c?elements[f].classList.contains("hidden")||(e[d]=elements[f],d++):(e[d]=elements[f],d++)}return e}
function yesHeaderTag(a){a=a.tagName;return"H1"===a||"H2"===a||"H3"===a||"H4"===a||"H5"===a||"H6"===a};
